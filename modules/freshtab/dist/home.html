<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Cliqz Tab</title>
        <link rel="stylesheet" type="text/css" href="./styles/home.css"/>
    </head>
    <body>
        <script>
            try {
                if (typeof Components !== "undefined") {
                    var ftConfig = 'extensions.cliqz.freshtabConfig',
                        theme = 'bg-blue';

                    Components.utils.import('resource://gre/modules/Services.jsm');
                    if (Services.prefs.getPrefType(ftConfig) == 32) { // pref exists and its char
                        try {
                            var config = JSON.parse(Services.prefs.getCharPref(ftConfig));

                            if(config && config.background && config.background.image){
                                theme =  config.background.image;
                            }
                        } catch(e) {
                            console.log('Freshtab error (unexpected config) :', e);
                        }
                    }

                    document.body.classList.add('theme-'+theme);

                    // stop button remains active in Firefox 56
                    const chromeWindow = Services.wm.getMostRecentWindow('navigator:browser')
                    const reloadButton = chromeWindow.document.getElementById('reload-button');
                    if (reloadButton) {
                        reloadButton.removeAttribute('displaystop');
                    }
                }
            } catch(e) {
                console.log('Freshtab error:', e);
            }
        </script>
        <div id="root"></div>
        <script type="text/javascript" src="./home.bundle.js"></script>
    </body>
</html>
